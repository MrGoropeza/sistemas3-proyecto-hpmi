<form [formGroup]="formComprobante">
  <div class="field flex flex-column">
    <label for="proveedor">Proveedor</label>
    <p-dropdown inputId="proveedor" [options]="proveedores"
        placeholder="Seleccionar" formControlName="proveedor"
        optionLabel="nombre" name="proveedor">
        <ng-template let-option pTemplate="item">
            {{option.nombre}}
        </ng-template>
    </p-dropdown>
    <small class="p-error" 
      *ngIf="formComprobante.controls['proveedor'].invalid 
      && formComprobante.controls['proveedor'].touched">Proveedor requerido.</small>
  </div>

  <div class="field flex flex-column">
    <label for="articulos">Articulos</label>
    <small class="p-error"
      *ngIf="formComprobante.controls['articulosSeleccionados'].invalid 
      && formComprobante.controls['articulosSeleccionados'].touched">Selección de artículos requerida.</small>
    <app-seleccionar-articulos (articuloSeleccionado)="articuloSeleccionado($event)"></app-seleccionar-articulos>
  </div>
  
  <div *ngFor="let articulo of articulosSeleccionados, let i=index">
    <h4>Artículo #{{i}}: {{articulo.nombre}}, {{articulo.descripcion}}</h4>

    <button
      pButton
      pRipple
      tooltipPosition="top"
      pTooltip="Agregar"
      icon="pi pi-plus"
      class="p-button-rounded p-button-info mr-2"
      (click)="quitarArticulo(articulo)"
  ></button>
    
    <div class="field flex flex-column">
      <label for="articulo{{i}}-precio">Precio: </label>
      <input #inputPrecio id="articulo{{i}}-precio" type="number" pInputText min="0"
          placeholder="Precio del artículo" formControlName="articulo{{i}}-precio"/>
      <small class="p-error"
        *ngIf="inputPrecio.value !== '' && $any(inputPrecio.value) >= 0
          && inputPrecio.classList.contains('ng-touched')">Precio requerido.</small>
    </div>
    

    <div class="field flex flex-column">
      <label for="articulo{{i}}-cantidad">Cantidad: </label>
      <input #inputCant id="articulo{{i}}-cantidad" type="number" pInputText min="0"
          placeholder="Cantidad del artículo" formControlName="articulo{{i}}-cantidad"/>
      <small class="p-error"
        *ngIf="inputCant.classList.contains('ng-invalid')
        && inputCant.classList.contains('ng-touched')">Cantidad requerida.</small>
    </div>
  </div>
  

</form>



<p>{{formComprobante.value | json}}</p>



<div class="flex justify-content-end">
  <button
    pButton
    pRipple
    type="button"
    label="Cancelar"
    icon="pi pi-times"
    class="p-button-text"
    (click)="cerrar()"
  ></button>

  <button
    pButton
    type="button"
    pRipple
    label="Guardar"
    icon="pi pi-check"
    class="p-button-text"
  ></button>
</div>